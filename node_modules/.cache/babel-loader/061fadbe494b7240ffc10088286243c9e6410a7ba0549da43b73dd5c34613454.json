{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./App.css';import KeyPadComponent from\"./components/KeyPadComponent\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){let[result,setResult]=useState('0');function calculate(){try{// eslint-disable-next-line\nlet x=eval(result);if(x.toString().length>16&&!/\\./.test(x)){x=x.toPrecision(16);}else if(x.toString().length>16&&/\\./.test(x)){// eslint-disable-next-line\nx=eval(x.toFixed(16));}setResult(x.toString());}catch(e){setResult('error');}};function reset(){setResult('0');}function clearLastChar(){if(/error|infinity|-infinity|NaN|undefined/i.test(result)){reset();}else{setResult(result.substring(0,result.length-1)||'0');}};function handleKey(e){if(!e.key)e.blur();// after mouse clear to fix keyboard bug \nlet key=e.key||e.name;let x=result.split(/[*/+\\-%]/);if(/Enter|=/.test(key)){calculate();}else if(/^c$/i.test(key)){reset();}else if(/Backspace/.test(key)){clearLastChar();}else if(result.length<=47&&/[*/+\\-%().]|^\\d$/.test(key)){if(/error|infinity|-infinity|NaN|undefined/i.test(result)){setResult(key);}else if(/\\d/.test(key)&&result==='0'){setResult(key);}else if(key==='.'&&result.match(/\\d$/)&&!/[d.]/.test(x[x.length-1])){setResult(result+key);}else if(key==='+'&&result!=='0'&&!/[*./+\\-(%]$/.test(result)){setResult(result+key);}else if(key==='-'&&result!=='0'&&!/[*./+\\-(%]$/.test(result)){setResult(result+key);}else if(key==='*'&&result!=='0'&&!/[*./+\\-(%]$/.test(result)){setResult(result+key);}else if(key==='/'&&result!=='0'&&!/[*./+\\-(%]$/.test(result)){setResult(result+key);}else if(key==='%'&&result!=='0'&&!/[*./+\\-(%]$/.test(result)){setResult(result+key);}else if(key===')'&&/\\(/.test(result)&&!/\\)/.test(result)&&!/\\(/.test(x[x.length-1])&&result.match(/\\d$/)){setResult(result+key);}else if(key===')'&&result.match(/\\d$/)&&/\\(/.test(result)&&!/\\(/.test(x[x.length-1])&&result.match(/\\(/g).length!==result.match(/\\)/g).length){setResult(result+key);}else if(key==='('&&result==='0'){setResult(key);}else if(key==='('&&result!=='0'&&!/[(.]$/.test(result)&&/[*/+\\-%]$/.test(result)){setResult(result+key);}else if(key==='0'&&result!=='0'&&!/[(.]$/.test(result)&&/[*/+\\-%]$/.test(result)){setResult(result+key);}else if(/\\d/.test(key)&&!/\\)$/.test(result)){setResult(result+key);}}}useEffect(()=>{document.addEventListener('keydown',handleKey);return()=>{document.removeEventListener('keydown',handleKey);};});return/*#__PURE__*/_jsxs(\"div\",{className:\"calculator-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"result\",children:/*#__PURE__*/_jsx(\"p\",{children:result})}),/*#__PURE__*/_jsx(KeyPadComponent,{onClick:handleKey})]});}","map":{"version":3,"names":["React","useState","useEffect","KeyPadComponent","jsx","_jsx","jsxs","_jsxs","App","result","setResult","calculate","x","eval","toString","length","test","toPrecision","toFixed","e","reset","clearLastChar","substring","handleKey","key","blur","name","split","match","document","addEventListener","removeEventListener","className","children","onClick"],"sources":["C:/Users/Warrior/myfirstreact/src/My Portfolio/projects/Calculator/src/App.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport './App.css';\r\nimport KeyPadComponent from \"./components/KeyPadComponent\";\r\n\r\nexport default function App(){\r\n\tlet [result, setResult]= useState('0');\r\n\r\n\tfunction calculate(){\r\n\t\ttry {\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\tlet x= eval(result);\r\n\t\t\tif (x.toString().length > 16 && !/\\./.test(x)){\r\n\t\t\t\tx= x.toPrecision(16)\r\n\t\t\t}else if (x.toString().length > 16 && /\\./.test(x)){\r\n\t\t\t\t// eslint-disable-next-line\r\n\t\t\t\tx= eval(x.toFixed(16))\r\n\t\t\t}\r\n\t\t\tsetResult(x.toString());\r\n\t\t} catch(e){\r\n\t\t\tsetResult('error')\r\n\t\t}\r\n\t};\r\n\r\n\tfunction reset(){\r\n\t\tsetResult('0');\r\n\t}\r\n\r\n\tfunction clearLastChar(){\r\n\t\tif (/error|infinity|-infinity|NaN|undefined/i.test(result)){\r\n\t\t\treset();\r\n\t\t} else{\r\n\t\t\tsetResult(result.substring(0, result.length - 1) || '0')\r\n\t\t}\r\n\t};\r\n\r\n\tfunction handleKey(e){\r\n\t\tif (!e.key) e.blur(); // after mouse clear to fix keyboard bug \r\n\t\tlet key= e.key || e.name;\r\n\t\tlet x= result.split(/[*/+\\-%]/);\r\n\t\tif (/Enter|=/.test(key)){\r\n\t\t\tcalculate();\r\n\t\t} else if (/^c$/i.test(key)){\r\n\t\t\treset();\r\n\t\t} else if (/Backspace/.test(key)){\r\n\t\t\tclearLastChar();\r\n\t\t} else if (result.length <= 47 &&\r\n\t\t/[*/+\\-%().]|^\\d$/.test(key)){\r\n\t\t\tif (/error|infinity|-infinity|NaN|undefined/i.test(result)){\r\n\t\t\t\tsetResult(key);\r\n\t\t\t}\telse if(/\\d/.test(key) && result === '0'){\r\n\t\t\t\tsetResult(key);\r\n\t\t\t} else if(key === '.' &&\r\n\t\t\t\tresult.match(/\\d$/) &&\r\n\t\t\t\t!/[d.]/.test(x[x.length -1])){\r\n\t\t\t\tsetResult(result + key);\r\n\t\t\t} else if(key === '+' &&\r\n\t\t\t\tresult !== '0' &&\r\n\t\t\t\t!/[*./+\\-(%]$/.test(result)){\r\n\t\t\t\tsetResult(result + key);\r\n\t\t\t} else if(key === '-' &&\r\n\t\t\t\tresult !== '0' &&\r\n\t\t\t\t!/[*./+\\-(%]$/.test(result)){\r\n\t\t\t\tsetResult(result + key);\r\n\t\t\t} else if(key === '*' &&\r\n\t\t\t\tresult !== '0' &&\r\n\t\t\t\t!/[*./+\\-(%]$/.test(result)){\r\n\t\t\t\tsetResult(result + key);\r\n\t\t\t} else if(key === '/' &&\r\n\t\t\t\tresult !== '0' &&\r\n\t\t\t\t!/[*./+\\-(%]$/.test(result)){\r\n\t\t\t\tsetResult(result + key);\r\n\t\t\t} else if(key === '%' &&\r\n\t\t\t\tresult !== '0' &&\r\n\t\t\t\t!/[*./+\\-(%]$/.test(result)){\r\n\t\t\t\tsetResult(result + key);\r\n\t\t\t} else if(key === ')' &&\r\n\t\t\t\t/\\(/.test(result) && !/\\)/.test(result) &&\r\n\t\t\t\t!/\\(/.test(x[x.length -1]) &&\r\n\t\t\t\tresult.match(/\\d$/)){\r\n\t\t\t\tsetResult(result + key);\r\n\t\t\t} else if(key === ')' && result.match(/\\d$/) &&\r\n\t\t\t\t/\\(/.test(result) &&\r\n\t\t\t\t!/\\(/.test(x[x.length -1]) &&\r\n\t\t\t\tresult.match(/\\(/g).length !==\r\n\t\t\t\tresult.match(/\\)/g).length){\r\n\t\t\t\tsetResult(result + key);\r\n\t\t\t} else if(key === '(' && result === '0'){\r\n\t\t\t\tsetResult(key);\r\n\t\t\t} else if(key === '(' && result !== '0' &&\r\n\t\t\t\t!/[(.]$/.test(result) &&\r\n\t\t\t\t/[*/+\\-%]$/.test(result)){\r\n\t\t\t\tsetResult(result + key);\r\n\t\t\t} else if(key === '0' && result !== '0' &&\r\n\t\t\t\t!/[(.]$/.test(result) &&\r\n\t\t\t\t/[*/+\\-%]$/.test(result)){\r\n\t\t\t\tsetResult(result + key);\r\n\t\t\t} else if(/\\d/.test(key) && !/\\)$/.test(result)){\r\n\t\t\t\tsetResult(result + key);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(()=>{\r\n\t\tdocument.addEventListener('keydown', handleKey);\r\n\t\treturn ()=> {\r\n\t\t\tdocument.removeEventListener('keydown', handleKey);\r\n\t\t}\r\n\t});\r\n\r\n\treturn(\r\n\t\t<div className=\"calculator-body\">\r\n\t\t\t<div className=\"result\">\r\n\t\t\t\t<p>{result}</p>\r\n\t\t\t</div>\r\n\t\t\t<KeyPadComponent onClick={handleKey}/>\r\n\t\t</div>\r\n\t);\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}